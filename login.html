<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>로그인 페이지</title>
</head>
<body>
  <form id="loginForm" action="http://localhost:3000" method="post">
    <table border="1">
      <tr>
        <td>아 이 디</td>
        <td><input name="id" required></td>
      </tr>
      <tr>
        <td>비밀번호</td>
        <td><input name="password" type="password" required></td>
      </tr>
      <tr>
        <td colspan="2">
          <input type="submit" value="로그인">
          <input type="reset" value="다시입력">
        </td>
      </tr>
    </table>
  </form>

  <script>
    document
      .getElementById('loginForm')
      .addEventListener('submit', function(e) {
        e.preventDefault();  

        const form = e.target;
        const url  = form.action;   
        const id   = form.id.value.trim();
        const password  = form.password.value.trim();

        fetch(url, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ id, password })
        })
        .then(res => {
          if (!res.ok) throw new Error('서버 통신 오류');
          return res.json();
        })
        .then(data => {
          if (data.success) {
            alert('로그인 성공!');
          } else {
            alert('로그인 실패, 입력하신 정보를 확인하세요.');
          }
        })
        .catch(err => {
          console.error(err);
          alert('서버 오류가 발생했습니다.');
        });
    });
  </script>
</body>
</html>
